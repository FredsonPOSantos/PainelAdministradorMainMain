<!-- Ficheiro: pages/admin_system_health.html -->
<div class="page-header">
    <h3><i class="fas fa-heartbeat" style="margin-right: 10px;"></i>Saúde do Sistema</h3>
</div>

<div id="systemHealthContainer" class="content-section" style="background: transparent; border: none; padding: 0; width: 100%; align-items: stretch;">
    <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr);">
        <!-- PostgreSQL Status -->
        <div class="stat-card health-card" id="pgHealthCard">
            <div class="stat-card-icon"><i class="fas fa-database"></i></div>
            <div class="stat-card-info">
                <span class="stat-card-title">PostgreSQL</span>
                <div class="stat-card-value" id="pgStatusText">Verificando...</div>
                <div class="stat-card-details" id="pgStatusDetails"></div>
            </div>
        </div>

        <!-- InfluxDB Status -->
        <div class="stat-card health-card" id="influxHealthCard">
            <div class="stat-card-icon"><i class="fas fa-chart-area"></i></div>
            <div class="stat-card-info">
                <span class="stat-card-title">InfluxDB</span>
                <div class="stat-card-value" id="influxStatusText">Verificando...</div>
                <div class="stat-card-details" id="influxStatusDetails"></div>
            </div>
        </div>

        <!-- Server Uptime -->
        <div class="stat-card health-card">
            <div class="stat-card-icon color-blue"><i class="fas fa-clock"></i></div>
            <div class="stat-card-info">
                <span class="stat-card-title">Uptime do Servidor</span>
                <div class="stat-card-value" id="serverUptimeText">...</div>
            </div>
        </div>

        <!-- Error Buffer -->
        <div class="stat-card health-card" id="bufferHealthCard">
            <div class="stat-card-icon"><i class="fas fa-archive"></i></div>
            <div class="stat-card-info">
                <span class="stat-card-title">Buffer de Erros Offline</span>
                <div class="stat-card-value" id="bufferCountText">...</div>
                <div class="stat-card-details">Erros aguardando conexão</div>
            </div>
        </div>
    </div>

    <div class="content-section">
        <div class="section-header">
            <h4>Últimos Erros de Sistema</h4>
            <button class="btn-secondary btn-sm" onclick="loadPage('admin_logs', document.querySelector('.nav-item[data-page=\'admin_logs\']'))">Ver Todos</button>
        </div>
        <div class="table-container">
            <table id="recentErrorsTable">
                <thead>
                    <tr>
                        <th>Data/Hora</th>
                        <th>Mensagem</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td colspan="2" style="text-align: center;">A carregar...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<script src="js/admin_system_health.js"></script>